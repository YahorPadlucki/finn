(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{132:function(e,t,a){e.exports=a(363)},363:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(28),o=a.n(r),s=a(3),u=a.n(s),i=a(5),l=function(e){return c.a.createElement("div",{className:"ui center aligned container",style:{border:"1px solid rgba(34,36,38,.15)"}},c.a.createElement("div",null,e.accountName," Balance:"),c.a.createElement("div",null,e.balance))};l.defaultProps={accountName:"",balance:0};var d=l,m=a(86),f=Object(n.createContext)({accounts:["1","2"],latestTransactions:["1","1"],historyTransactions:[],categories:["Food"],incomeCategories:["Salary"],isLoaded:!1,allTransactionsLoaded:!1,isAllTransactionsLoaded:!1,loadMoreTransactions:function(){},fetchHistoryTransactions:function(e,t){},edit:function(e,t,a){},addAccount:function(e){},addCategory:function(e){}}),p=function(e){var t=Object(n.useState)({}),a=Object(i.a)(t,2),r=a[0],o=a[1];Object(n.useEffect)((function(){var e=new Date,t=e.getFullYear(),a=e.getMonth();o({month:a,year:t})}),[]),Object(n.useEffect)((function(){r.month&&r.year&&e.onSelectedDateChanged(r.month,r.year)}),[r]);return c.a.createElement("div",null,c.a.createElement("select",{className:"ui search dropdown",value:r.month,onChange:function(e){return t=e.target.value,void o({month:t,year:r.year});var t}},c.a.createElement("option",{value:"0"},"Jan"),c.a.createElement("option",{value:"1"},"Feb"),c.a.createElement("option",{value:"2"},"Mar"),c.a.createElement("option",{value:"3"},"Apr"),c.a.createElement("option",{value:"4"},"May"),c.a.createElement("option",{value:"5"},"Jun"),c.a.createElement("option",{value:"6"},"Jul"),c.a.createElement("option",{value:"7"},"Aug"),c.a.createElement("option",{value:"8"},"Sep"),c.a.createElement("option",{value:"9"},"Oct"),c.a.createElement("option",{value:"10"},"Nov"),c.a.createElement("option",{value:"11"},"Dec")),c.a.createElement("select",{className:"ui search dropdown",value:r.year,onChange:function(e){return t=e.target.value,void o({month:r.month,year:t});var t}},c.a.createElement("option",{value:"2020"},"2020"),c.a.createElement("option",{value:"2019"},"2019")))},b="transactionType",v=a(127),E=a.n(v),y=function(){var e=Object(n.useContext)(f),t=e.categories,a=e.historyTransactions,r=e.getNameFromNameId,o=e.fetchHistoryTransactions,s=Object(n.useState)({month:1,year:2020}),u=Object(i.a)(s,1)[0],l=Object(n.useState)(0),d=Object(i.a)(l,2),v=d[0],y=d[1],h=Object(n.useRef)(null);Object(n.useEffect)((function(){o(u.year,u.month)}),[u]),Object(n.useEffect)((function(){if(a.length){var e=a.reduce((function(e,t){var a=0;return t.type===b&&(a=t.total),e+a}),0);y(e)}}),[a]);var g=function(e){return t.filter((function(t){return t.nameId===e.categoryNameId}))[0].color};return c.a.createElement("div",{className:"ui segment",style:{border:"1px solid rgba(34,36,38,.15)"}},c.a.createElement(p,{onSelectedDateChanged:o}),c.a.createElement("h4",{style:{textAlign:"right"}},"Expenses total: ",v),c.a.createElement("table",{className:"ui celled table unstackable"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"two wide"},"Color"),c.a.createElement("th",{className:"ten wide"},"Category"),c.a.createElement("th",{className:"two wide"},"Percent"),c.a.createElement("th",{className:"two wide"},"Total"))),c.a.createElement("tbody",null,function(){if(!t||!t.length)return"";var e=[];return a.forEach((function(t){if(t.type===b)if(e.length){var a=e.filter((function(e){return e.categoryNameId===t.categoryNameId}))[0];a?a.total+=t.total:e.push(Object(m.a)({},t))}else e.push(Object(m.a)({},t))})),function(e){var t=h.current;if(!t)return;var a=t.getContext("2d"),n=[],c=[],o=[];e.forEach((function(e){n.push(r(e.categoryNameId)),c.push(e.total),o.push(g(e))})),new E.a(a,{type:"pie",data:{labels:n,datasets:[{backgroundColor:o,data:c}]}})}(e),e.map((function(e,t){return c.a.createElement("tr",null,c.a.createElement("td",{style:{"background-color":g(e)}}),c.a.createElement("td",null,r(e.categoryNameId)),c.a.createElement("td",null,(e.total/v*100).toFixed(1)+"%"),c.a.createElement("td",null,e.total))}))}())),c.a.createElement("canvas",{ref:h}))},h=function(e){var t=[{name:"Balance",type:"infoBlock"},{name:"Expenses",type:"infoBlock"},{name:"+",type:"addTransaction"},{name:"History",type:"infoBlock"},{name:"Settings",type:"infoBlock"}],a=function(t,a){return e.selectedButtonIndex===a?"ui active button":"ui button"},n=function(t,a,n){e.onButtonClicked(n)};return c.a.createElement("div",{className:"ui container",style:{border:"1px solid rgba(34,36,38,.15)",textAlign:"center"}},c.a.createElement("div",{className:"ui five buttons"},t.map((function(e,t){return c.a.createElement("button",{key:t,className:a(e.type,t),onMouseDown:function(a){return n(a,e.type,t)}},e.name)}))))},g=function(){var e=Object(n.useContext)(f),t=e.accounts,a=e.getNameFromNameId;return c.a.createElement("div",{className:"ui segment"},c.a.createElement("h3",{className:"header"},"Balance"),t.map((function(e,t){return c.a.createElement("p",{key:t},a(e.nameId),": ",e.balance)})))},x=function(){return c.a.createElement("div",{className:"ui container",style:{border:"1px solid rgba(34,36,38,.15)"}},c.a.createElement("div",{className:"ui centered grid",style:{padding:"10px"}},c.a.createElement("div",{className:"four wide column"},c.a.createElement(g,null))))},N=(a(88),function(e){return o.a.createPortal(c.a.createElement("div",{className:"ui dimmer modals page transition visible active",onClick:e.onDismiss},c.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"ui standard test modal  active"},c.a.createElement("div",{className:"header"},e.title),c.a.createElement("div",{className:"content"},e.content),c.a.createElement("div",{className:"actions"},e.actions))),document.querySelector(".modal"))}),w=a(128),O=a.n(w),I=(a(139),function(e){var t=Object(n.useContext)(f),a=t.accounts,r=t.categories,o=t.incomeCategories,s=t.getNameFromNameId,l=Object(n.useState)(!0),d=Object(i.a)(l,2),m=d[0],p=d[1],v=Object(n.useState)(e.date),E=Object(i.a)(v,2),y=E[0],h=E[1],g=Object(n.useState)(""),x=Object(i.a)(g,2),N=x[0],w=x[1],I=Object(n.useState)(""),C=Object(i.a)(I,2),j=C[0],T=C[1],S=Object(n.useState)(0),k=Object(i.a)(S,2),A=k[0],D=k[1],F=Object(n.useState)(e.selectedAccountFromNameId),L=Object(i.a)(F,2),B=L[0],P=L[1],H=Object(n.useState)(e.selectedAccountToNameId),M=Object(i.a)(H,2),J=M[0],_=M[1],K=Object(n.useState)(e.selectedCategoryNameId),Y=Object(i.a)(K,2),q=Y[0],R=Y[1],X=Object(n.useState)(e.selectedIncomeCategoryNameId),z=Object(i.a)(X,2),G=z[0],Q=z[1];Object(n.useEffect)((function(){e.amount&&w(e.amount),e.description&&T(e.description),e.transactionType&&(e.transactionType===b&&D(0),"transferType"===e.transactionType&&D(1),"incomeType"===e.transactionType&&D(2)),y||h(new Date)}),[]),Object(n.useEffect)((function(){te()}),[B,J]),Object(n.useEffect)((function(){a[0]&&(e.selectedAccountToNameId||_(a[0].nameId),e.selectedAccountFromNameId||P(a[0].nameId))}),[a]);var U=function(){return $(r.map((function(e){return e.nameId})),(function(e){return function(e){R(e)}(e)}),q)},V=function(){return $(o.map((function(e){return e.nameId})),(function(e){Q(e)}),G)},W=function(){return $(a.map((function(e){return e.nameId})),(function(t){return function(t){P(t),e.onAccountChanged&&e.onAccountChanged(t)}(t)}),B)},Z=function(){return $(a.map((function(e){return e.nameId})),(function(e){return function(e){_(e)}(e)}),J)},$=function(e,t,a){return c.a.createElement("select",{className:"ui search dropdown",value:a,onChange:function(e){return t(parseInt(e.target.value))}},e.map((function(e,t){return c.a.createElement("option",{key:t,value:e},s(e))})))},ee=function(){return 1===A&&J===B},te=function(){return ae()||m||p(!0),c.a.createElement("div",{className:"field ".concat(m?"":"error"," ").concat(ee()?"disabled":"")},c.a.createElement("input",{type:"text",style:{},ref:function(e){e},value:N,onChange:function(e){return w(e.target.value)},onKeyPress:oe,placeholder:"Amount"}))},ae=function(){return 0===N.length||isNaN(N)||N<=0||ee()},ne=function(){var t,a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:ae()||ee()?p(!1):(m||p(!0),t=ce(),a={total:Number(N),accountNameId:B||e.selectedAccountFromNameId,toAccountNameId:J,categoryNameId:re(),date:y,year:y.getFullYear(),month:y.getMonth(),day:y.getDate(),description:j,type:t},e.id&&(a.id=e.id),e.onSaveClickedCallBack(a,t),w(""),T(""));case 1:case"end":return n.stop()}}))},ce=function(){switch(A){case 0:return b;case 1:return"transferType";case 2:return"incomeType"}},re=function(){switch(A){case 0:return q||e.selectedCategoryNameId;case 2:return G||e.selectedIncomeCategoryNameId}},oe=function(e){"Enter"===e.key&&ne()},se="ui form ".concat(e.isLoaded?"":"loading"),ue=function(e){return"item ".concat(e===A?"active":"")},ie=function(e){return D(e)};return c.a.createElement("div",{className:"eight wide column"},function(){if(!e.isEditPopup)return c.a.createElement("div",{className:"ui three item menu"},c.a.createElement("a",{className:ue(0),onClick:function(){return ie(0)}},"Expense"),c.a.createElement("a",{className:ue(1),onClick:function(){return ie(1)}},"Transfer"),c.a.createElement("a",{className:ue(2),onClick:function(){return ie(2)}},"Income"))}(),c.a.createElement("form",{className:se,onSubmit:function(e){return e.preventDefault()}},c.a.createElement("div",{className:"field"},c.a.createElement("label",null,function(){switch(A){case 0:return"Account";case 1:return"From Account";case 2:return"To Account"}}()),c.a.createElement("div",{className:"fields"},c.a.createElement("div",{className:"nine wide field"},W()),c.a.createElement("div",{className:"seven wide field"},te()))),c.a.createElement("div",{className:"field"},c.a.createElement("label",null,function(){switch(A){case 0:return"Category";case 1:return"To Account";case 2:return"From"}}()),c.a.createElement("div",{className:"fields"},c.a.createElement("div",{className:"nine wide field"},function(){switch(A){case 0:return U();case 1:return Z();case 2:return V()}}()),c.a.createElement("div",{className:"seven wide field"},c.a.createElement(O.a,{selected:y,onChange:function(e){return h(e)}})))),c.a.createElement("div",{className:"field"},c.a.createElement("input",{type:"text",value:j,onChange:function(e){return T(e.target.value)},onKeyPress:oe,placeholder:"Note"})),c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement("button",{className:"big ui primary button ",onClick:ne},"Save"),function(){if(e.onCancel)return c.a.createElement("button",{className:"big ui button",onClick:function(){return e.onCancel()}},"Cancel")}())))}),C=function(e){return c.a.createElement(N,{title:"Edit transaction",content:c.a.createElement(I,{isLoaded:e.isLoaded,isEditPopup:!0,date:new Date(e.transactionToEdit.date),description:e.transactionToEdit.description,amount:e.transactionToEdit.total,id:e.transactionToEdit.id,selectedAccountFromNameId:e.transactionToEdit.accountNameId,selectedAccountToNameId:e.transactionToEdit.toAccountNameId,selectedCategoryNameId:e.transactionToEdit.categoryNameId,transactionType:e.transactionToEdit.type,onSaveClickedCallBack:e.onSaveClickedCallBack,onCancel:e.OnCancel}),onDismiss:function(){return e.OnCancel()}})},j=Object(n.createContext)({editTransaction:function(e){},removeTransaction:function(e){},addTransaction:function(e){},addIncomeTransaction:function(e){},addTransferTransaction:function(e){},getNameFromNameId:function(e){},removeAccount:function(e){}}),T=function(e){return c.a.createElement(N,{title:"Delete ".concat(e.itemName),content:"Are you sure you want to delete this ".concat(e.itemName,"?"),actions:c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement("button",{className:"ui button red ",onClick:function(){e.OnDelete()}},"Delete"),c.a.createElement("button",{className:"ui button",onClick:e.OnCancel},"Cancel")),onDismiss:function(){e.OnCancel()}})},S=function(e){var t=Object(n.useContext)(f),a=t.latestTransactions,r=t.historyTransactions,o=t.isLoaded,s=t.loadMoreTransactions,u=t.isAllTransactionsLoaded,l=t.fetchHistoryTransactions,d=t.getNameFromNameId,m=Object(n.useContext)(j),v=m.editTransaction,E=m.removeTransaction,y=Object(n.useState)(!1),h=Object(i.a)(y,2),g=h[0],x=h[1],N=Object(n.useState)(!1),w=Object(i.a)(N,2),O=w[0],I=w[1],S=Object(n.useState)({}),k=Object(i.a)(S,2),A=k[0],D=k[1],F=Object(n.useState)(e.itemsToShow),L=Object(i.a)(F,2),B=L[0],P=L[1],H=Object(n.useState)([]),M=Object(i.a)(H,2),J=M[0],_=M[1];Object(n.useEffect)((function(){P(e.itemsToShow)}),[]),Object(n.useEffect)((function(){e.isHistoryTab?(_(r),P(r.length)):_(a)}),[a,r]);var K=function(){var e=B+5;P(e),console.log("itemsToShow "+B),e>J.length&&s()},Y=function(){return x(!1)},q=function(){return I(!1)},R="ui ".concat(o?"":"active"," inverted dimmer");return c.a.createElement("div",{className:"ui segment",style:{border:"1px solid rgba(34,36,38,.15)"}},c.a.createElement("div",{className:R},c.a.createElement("div",{className:"ui text loader"})),c.a.createElement("h4",{style:{textAlign:"center"}},"History"),function(){if(e.isHistoryTab)return c.a.createElement(p,{onSelectedDateChanged:l})}(),c.a.createElement("div",{className:"ui centered padded grid"},J?J.slice(0,B).map((function(e,t){return c.a.createElement("div",{className:"row",key:t},c.a.createElement("strong",{className:"five  wide column",style:{textAlign:"left",verticalAlign:"text-bottom"}},function(e){var t=new Date(e);return"".concat(t.getDate(),".").concat(t.getMonth()+1)}(e.date)),c.a.createElement("div",{className:"seven wide column",style:{textAlign:"left",color:e.type===b?"":"incomeType"===e.type?"green":""}},c.a.createElement("label",null,d(e.accountNameId)),c.a.createElement("label",null," ","incomeType"===e.type?"<-":"->"," "),c.a.createElement("label",null,"transferType"===e.type?d(e.toAccountNameId):d(e.categoryNameId)),c.a.createElement("div",null,e.description)),c.a.createElement("div",{className:"four wide column ",style:{textAlign:"right"}},c.a.createElement("label",{style:{padding:"20px"}},e.total),c.a.createElement("div",{className:"mini ui button",onClick:function(){D(e),x(!0)}},"/"),c.a.createElement("div",{className:"mini ui button red",onClick:function(){D(e),I(!0)}},"X")))})):c.a.createElement("div",null,"Loading"),function(){if(!(e.isHistoryTab||u&&B>=J.length))return c.a.createElement("button",{className:"ui button",onClick:K},"Show more")}()),function(){if(g)return c.a.createElement(C,{isLoaded:!0,transactionToEdit:A,onSaveClickedCallBack:function(e){v(A,e),Y()},OnCancel:Y})}(),function(){if(O)return c.a.createElement(T,{itemName:"transaction",OnDelete:function(){E(A),q()},OnCancel:q})}())},k=function(e){var t=Object(n.useContext)(j),a=t.addTransaction,r=t.addTransferTransaction,o=t.addIncomeTransaction,s=Object(n.useState)(!1),l=Object(i.a)(s,2),d=l[0],m=l[1],f=Object(n.useState)(""),p=Object(i.a)(f,2),v=p[0],E=p[1];return c.a.createElement("div",{className:"ui container",style:{border:"1px solid rgba(34,36,38,.15)"}},c.a.createElement("div",{className:"ui centered grid",style:{padding:"10px"}},c.a.createElement("div",{className:"four wide column"},c.a.createElement(g,null)),c.a.createElement(I,{isLoaded:e.isLoaded&&!d,selectedCategoryNameId:e.selectedCategoryNameId,selectedAccountNameId:e.selectedAccountNameId,selectedIncomeCategoryNameId:e.selectedIncomeCategoryNameId,onAccountChanged:e.onAccountChanged,onSaveClickedCallBack:function(e,t){var n;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:m(!0),c.t0=t,c.next=c.t0===b?4:"transferType"===c.t0?8:"incomeType"===c.t0?12:16;break;case 4:return c.next=6,u.a.awrap(a(e));case 6:return n=c.sent,c.abrupt("break",16);case 8:return c.next=10,u.a.awrap(r(e));case 10:return n=c.sent,c.abrupt("break",16);case 12:return c.next=14,u.a.awrap(o(e));case 14:return n=c.sent,c.abrupt("break",16);case 16:E(n?"Transaction Saved":"Failed to Save"),m(!1);case 18:case"end":return c.stop()}}))}})),c.a.createElement("div",{style:{textAlign:"center"}},v),c.a.createElement(S,{itemsToShow:5}))},A=function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(fetch("http://localhost:".concat(3002,"/").concat(e)).catch((function(){return!1})));case 2:if(t=a.sent){a.next=5;break}return a.abrupt("return",!1);case 5:return a.next=7,u.a.awrap(t.json());case 7:return a.abrupt("return",a.sent);case 8:case"end":return a.stop()}}))},D=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(P("http://localhost:".concat(3002,"/transactions"),e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},F=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(P("http://localhost:".concat(3002,"/namesArray"),e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},L=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(P("http://localhost:".concat(3002,"/accounts"),e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},B=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(P("http://localhost:".concat(3002,"/categories"),e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},P=function(e,t){return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(){return!0})).catch((function(e){return e}))},H=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(K("http://localhost:".concat(3002,"/transactions/").concat(e.id),e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},M=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(K("http://localhost:".concat(3002,"/accounts/").concat(e.id),e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},J=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(K("http://localhost:".concat(3002,"/namesArray/").concat(e.id),e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},_=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(K("http://localhost:".concat(3002,"/categories/").concat(e.id),e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},K=function(e,t){return fetch(e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(){return!0})).catch((function(e){return e}))},Y=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(R("http://localhost:".concat(3002,"/transactions/").concat(e)));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},q=function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(R("http://localhost:".concat(3002,"/accounts/").concat(e)));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},R=function(e){return fetch(e,{method:"DELETE"}).then((function(){return!0})).catch((function(e){return e}))},X=a(131),z=function(e){var t=Object(n.useContext)(f).getNameFromNameId,a=Object(n.useState)(e.fieldToEdit?t(e.fieldToEdit.nameId):""),r=Object(i.a)(a,2),o=r[0],s=r[1],l=Object(n.useState)(e.color),d=Object(i.a)(l,2),m=d[0],p=d[1],b="ui form ".concat(e.isLoaded?"":"loading"),v=function(){return m?c.a.createElement("div",{className:"ui grid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"six wide column "},c.a.createElement("label",null,"Select Color"),c.a.createElement(X.CompactPicker,{color:m,onChangeComplete:E})))):c.a.createElement("div",null)},E=function(e){p(e.hex)},y=function(){var a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:a={nameId:e.fieldToEdit.nameId},t(e.fieldToEdit.nameId)!==o&&(a.name=o),m!==e.color&&(console.log("=== old color "+e.color),console.log("=== saving color "+m),a.color=m),(a.color||a.name)&&e.onSaveClickedCallBack(a);case 4:case"end":return n.stop()}}))},h=function(e){"Enter"===e.key&&y()};return c.a.createElement(N,{title:e.title,content:c.a.createElement("form",{className:b,onSubmit:function(e){return e.preventDefault()}},c.a.createElement("div",{className:"field"},c.a.createElement("input",{type:"text",value:o,onChange:function(e){return s(e.target.value)},onKeyPress:h})),v(),c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement("button",{className:"big ui primary button ",onClick:y},"Save"),c.a.createElement("button",{className:"big ui button",onClick:function(){return e.OnCancel()}},"Cancel"))),onDismiss:function(){return e.OnCancel()}})},G=function(){var e=Object(n.useContext)(f),t=e.isLoaded,a=e.accounts,r=e.categories,o=e.edit,s=e.getNameFromNameId,u=e.addAccount,l=e.addCategory,d=(Object(n.useContext)(j).removeAccount,Object(n.useState)(!1)),m=Object(i.a)(d,2),p=m[0],b=m[1],v=Object(n.useState)(!1),E=Object(i.a)(v,2),y=E[0],h=E[1],g=Object(n.useState)("edit"),x=Object(i.a)(g,2),N=x[0],w=x[1],O=Object(n.useState)(""),I=Object(i.a)(O,2),C=I[0],S=I[1],k=Object(n.useState)(""),A=Object(i.a)(k,2),D=A[0],F=A[1],L=Object(n.useState)(""),B=Object(i.a)(L,2),P=B[0],H=(B[1],function(){return b(!1)}),M=function(){return h(!1)},J="ui ".concat(t?"":"active"," inverted dimmer");function _(e,t){return e.color?e.color:"addCategory"===t?"#ffffff":void 0}function K(e,t,a){return e.map((function(e,t){return c.a.createElement("div",{className:"item",key:t},c.a.createElement("div",null,s(e.nameId),c.a.createElement("div",{className:"mini ui button right floated",onClick:function(){S(e),F("Edit name"),b(!0),w("edit")}},"/")))}))}return c.a.createElement("div",{className:"ui segment",style:{border:"1px solid rgba(34,36,38,.15)"}},c.a.createElement("div",{className:J},c.a.createElement("div",{className:"ui text loader"})),c.a.createElement("h4",{style:{textAlign:"center"}},"Settings"),c.a.createElement("h3",null,"Accounts",c.a.createElement("div",{className:"mini ui button blue right floated",onClick:function(){F("Add new Account"),S(""),b(!0),w("addAccount")}},"+")),c.a.createElement("div",{className:"ui middle aligned divided list"},K(a)),c.a.createElement("h3",null,"Categories",c.a.createElement("div",{className:"mini ui button blue right floated",onClick:function(){F("Add new Category"),S(""),b(!0),w("addCategory")}},"+")),c.a.createElement("div",{className:"ui middle aligned divided list"},K(r)),function(){if(p)return c.a.createElement(z,{isLoaded:t,title:D,fieldToEdit:C,color:_(C,N),onSaveClickedCallBack:function(e){switch(N){case"edit":o(e);break;case"addAccount":u(e.name);break;case"addCategory":l(e.name,e.color)}H()},OnCancel:H})}(),function(){if(y)return c.a.createElement(T,{itemName:P,OnDelete:function(){M()},OnCancel:M})}())},Q=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),s=Object(i.a)(o,2),l=s[0],m=s[1],p=Object(n.useState)([]),v=Object(i.a)(p,2),E=v[0],g=v[1],N=Object(n.useState)([]),w=Object(i.a)(N,2),O=w[0],I=w[1],C=Object(n.useState)([]),T=Object(i.a)(C,2),P=T[0],K=T[1],R=Object(n.useState)([]),X=Object(i.a)(R,2),z=X[0],Q=X[1],U=Object(n.useState)(""),V=Object(i.a)(U,2),W=V[0],Z=V[1],$=Object(n.useState)(""),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),ce=Object(i.a)(ne,2),re=ce[0],oe=ce[1],se=Object(n.useState)(2),ue=Object(i.a)(se,2),ie=ue[0],le=ue[1],de=Object(n.useState)(!1),me=Object(i.a)(de,2),fe=me[0],pe=me[1],be=Object(n.useState)(10),ve=Object(i.a)(be,2),Ee=ve[0],ye=ve[1],he=Object(n.useState)(!1),ge=Object(i.a)(he,2),xe=ge[0],Ne=ge[1];function we(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(Oe());case 2:return t.next=4,u.a.awrap(Ie());case 4:return t.next=6,u.a.awrap(Ce());case 6:return console.log("=== fetch init data"),t.next=9,u.a.awrap(A("incomeCategories"));case 9:return(e=t.sent)&&(I(e),oe(e[0].nameId),console.log("init income "+e[0].nameId)),t.next=13,u.a.awrap(Te());case 13:pe(!0);case 14:case"end":return t.stop()}}))}Object(n.useEffect)((function(){console.log("did mount"),we()}),[]),Object(n.useEffect)((function(){console.log("loadTransactionsLimit changed"),Te()}),[Ee]);var Oe=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(A("namesArray"));case 2:e=t.sent,m(e);case 4:case"end":return t.stop()}}))},Ie=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(A("accounts"));case 2:(e=t.sent)&&(r(e),Z(e[0]));case 4:case"end":return t.stop()}}))},Ce=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(A("categories"));case 2:(e=t.sent)&&(g(e),ae(e[0].nameId));case 4:case"end":return t.stop()}}))},je=function(e){if(e)return l.filter((function(t){return t.nameId===e}))[0].name},Te=function e(){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(A("transactions"+"?_sort=id&_order=desc&_page=1&_limit=".concat(Ee)));case 2:if(!(t=a.sent)){a.next=8;break}Ne(t.length===P.length||t.length<Ee),K(t),a.next=10;break;case 8:return a.next=10,u.a.awrap(e());case 10:case"end":return a.stop()}}))},Se=function e(t,a){var n;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return console.log("fetch history "+t),console.log("fetch history "+a),c.next=4,u.a.awrap(A("transactions"+"?_sort=id&_order=desc&year=".concat(a,"&month=").concat(t)));case 4:if(!(n=c.sent)){c.next=9;break}Q(n),c.next=11;break;case 9:return c.next=11,u.a.awrap(e());case 11:case"end":return c.stop()}}))},ke=function(e){Z(a.find((function(t){return t.nameId===e})))},Ae=function(e,t){var n,c,r,o,s;return u.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=a.filter((function(t){return t.nameId===e.accountNameId}))[0],c=a.filter((function(t){return t.nameId===e.toAccountNameId}))[0],r=a.filter((function(e){return e.nameId===t.accountNameId}))[0],o=a.filter((function(e){return e.nameId===t.toAccountNameId}))[0],t.total===e.total?n===r?c!==o&&(c.balance-=e.total,o.balance+=t.total):c===o?(n.balance+=e.total,r.balance-=t.total):(n.balance+=e.total,c.balance-=e.total,r.balance-=t.total,o.balance+=t.total):(s=e.total-t.total,n===r?(n.balance+=s,c===o?c.balance-=s:(o.balance+=t.total,c.balance-=e.total)):c===o?(r.balance-=t.total,n.balance+=e.total,c.balance-=s):(n.balance+=e.total,c.balance-=e.total,r.balance-=t.total,o.balance+=t.total)),i.next=7,u.a.awrap(M(n));case 7:return i.next=9,u.a.awrap(M(r));case 9:return i.next=11,u.a.awrap(M(c));case 11:return i.next=13,u.a.awrap(M(o));case 13:return i.next=15,u.a.awrap(H(e));case 15:return i.next=17,u.a.awrap(H(t));case 17:return i.next=19,u.a.awrap(Te());case 19:return i.next=21,u.a.awrap(Se(e.year,e.month));case 21:case"end":return i.stop()}}))},De=function(e){var t,a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=l.sort((function(e,t){return e.nameId>t.nameId?1:t.nameId>e.nameId?-1:0}))[l.length-1].nameId+1,a={name:e,nameId:t},n.next=4,u.a.awrap(F(a));case 4:return n.abrupt("return",t);case 5:case"end":return n.stop()}}))};return c.a.createElement(j.Provider,{value:{editTransaction:function(e,t){var n,c,r,o,s;return u.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if("transferType"!==e.type){i.next=4;break}return i.next=3,u.a.awrap(Ae(e,t));case 3:return i.abrupt("return");case 4:if(n=1,"incomeType"===e.type&&(n=-1),e.accountNameId!==t.accountNameId){i.next=14;break}return c=e.total-t.total,(r=a.filter((function(t){return t.nameId===e.accountNameId}))[0]).balance+=c*n,i.next=12,u.a.awrap(M(r));case 12:i.next=21;break;case 14:return o=a.filter((function(t){return t.nameId===e.accountNameId}))[0],s=a.filter((function(e){return e.nameId===t.accountNameId}))[0],t.total===e.total?(o.balance+=t.total*n,s.balance-=t.total*n):(o.balance+=e.total*n,s.balance-=t.total*n),i.next=19,u.a.awrap(M(o));case 19:return i.next=21,u.a.awrap(M(s));case 21:return i.next=23,u.a.awrap(H(t));case 23:return i.next=25,u.a.awrap(Te());case 25:return i.next=27,u.a.awrap(Se(e.year,e.month));case 27:case"end":return i.stop()}}))},removeTransaction:function(e){var t,n;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return pe(!1),c.next=3,u.a.awrap(Y(e.id));case 3:if(t=a.filter((function(t){return t.nameId===e.accountNameId}))[0],e.type===b&&(t.balance+=e.total),"incomeType"===e.type&&(t.balance-=e.total),"transferType"!==e.type){c.next=12;break}return t.balance+=e.total,(n=a.filter((function(t){return t.nameId===e.toAccountNameId}))[0]).balance-=e.total,c.next=12,u.a.awrap(M(n));case 12:return c.next=14,u.a.awrap(M(t));case 14:return c.next=16,u.a.awrap(we());case 16:return c.next=18,u.a.awrap(Se(e.year,e.month));case 18:pe(!0);case 19:case"end":return c.stop()}}))},addTransaction:function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return pe(!1),a.next=3,u.a.awrap(D(e));case 3:return t=a.sent,W.balance-=e.total,a.next=7,u.a.awrap(M(W));case 7:return a.next=9,u.a.awrap(Te());case 9:return pe(!0),a.abrupt("return",t);case 11:case"end":return a.stop()}}))},addIncomeTransaction:function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return pe(!1),a.next=3,u.a.awrap(D(e));case 3:return t=a.sent,W.balance+=e.total,a.next=7,u.a.awrap(M(W));case 7:return a.next=9,u.a.awrap(Te());case 9:return pe(!0),a.abrupt("return",t);case 11:case"end":return a.stop()}}))},addTransferTransaction:function(e){var t,n,c;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return pe(!1),r.next=3,u.a.awrap(D(e));case 3:return t=r.sent,n=a.filter((function(t){return t.nameId===e.accountNameId}))[0],(c=a.filter((function(t){return t.nameId===e.toAccountNameId}))[0]).balance+=e.total,n.balance-=e.total,r.next=10,u.a.awrap(M(c));case 10:return r.next=12,u.a.awrap(M(n));case 12:return r.next=14,u.a.awrap(Te());case 14:return pe(!0),r.abrupt("return",t);case 16:case"end":return r.stop()}}))},removeAccount:function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return pe(!1),t.next=3,u.a.awrap(q(e));case 3:return t.next=5,u.a.awrap(we());case 5:pe(!0);case 6:case"end":return t.stop()}}))}}},c.a.createElement(f.Provider,{value:{accounts:a,latestTransactions:P,historyTransactions:z,categories:E,incomeCategories:O,isLoaded:fe,isAllTransactionsLoaded:xe,loadMoreTransactions:function(){ye(Ee+10)},fetchHistoryTransactions:Se,getNameFromNameId:je,edit:function(e){var t,a,n;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(pe(!1),!e.name){c.next=12;break}return t=l.filter((function(t){return t.nameId===e.nameId}))[0].id,console.log("pathc id "+t),console.log("pathc name "+e.name),console.log("pathc name id "+e.nameId),c.next=8,u.a.awrap(J({id:t,name:e.name,nameId:e.nameId}));case 8:return c.next=10,u.a.awrap(A("namesArray"));case 10:a=c.sent,m(a);case 12:if(!e.color){c.next=24;break}return console.log(E),n=E.filter((function(t){return t.nameId===e.nameId}))[0].id,console.log("pathc "+e.color),console.log("data.nameId "+e.nameId),c.next=19,u.a.awrap(_({id:n,color:e.color}));case 19:return c.t0=g,c.next=22,u.a.awrap(A("categories"));case 22:c.t1=c.sent,(0,c.t0)(c.t1);case 24:pe(!0);case 25:case"end":return c.stop()}}))},addAccount:function(e){var t,a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(De(e));case 2:return t=n.sent,pe(!1),n.next=6,u.a.awrap(Oe());case 6:return a={nameId:t,balance:0},n.next=9,u.a.awrap(L(a));case 9:return n.next=11,u.a.awrap(Ie());case 11:pe(!0);case 12:case"end":return n.stop()}}))},addCategory:function(e,t){var a,n;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,u.a.awrap(De(e));case 2:return a=c.sent,pe(!1),c.next=6,u.a.awrap(Oe());case 6:return n={nameId:a,color:t},c.next=9,u.a.awrap(B(n));case 9:return c.next=11,u.a.awrap(Ce());case 11:pe(!0);case 12:case"end":return c.stop()}}))}}},c.a.createElement("div",{className:"ui container",style:{marginTop:"10px"}},c.a.createElement(h,{selectedButtonIndex:ie,onButtonClicked:function(e){le(e),console.log(e)}}),c.a.createElement(d,{accountName:je(W.nameId),balance:W.balance}),function(){switch(ie){case 0:return c.a.createElement(x,null);case 1:return c.a.createElement(y,null);case 2:return c.a.createElement(k,{selectedAccountNameId:W.nameId,selectedCategoryNameId:te,onAccountChanged:ke,selectedIncomeCategoryNameId:re,isLoaded:fe});case 3:return c.a.createElement(S,{itemsToShow:10,isHistoryTab:!0});case 4:return c.a.createElement(G,null);default:return null}}())))};o.a.render(c.a.createElement(Q,null),document.getElementById("root"))},88:function(e,t,a){}},[[132,1,2]]]);
//# sourceMappingURL=main.343c547e.chunk.js.map